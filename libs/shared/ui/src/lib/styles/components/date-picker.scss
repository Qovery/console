// This style override the library react-datepicker

.date-picker {
  &.date-picker--open {
    transform: translateY(0);
    animation-name: menuOpenBottom;
  }

  .react-datepicker__header--custom,
  .react-datepicker__day--keyboard-selected {
    border: 0;
    padding: 0;
    background-color: transparent;
  }

  // Remove border around the datepicker
  .react-datepicker {
    border: none;
    box-shadow: none;
    background-color: inherit;
    padding: 12px 16px 4px;
  }

  .react-datepicker__week {
    display: flex;
  }

  .react-datepicker__month,
  .react-datepicker__day-name {
    margin: 0;
  }

  .react-datepicker__day-names {
    margin-bottom: theme('spacing.4');
  }

  .react-datepicker__day-name {
    width: theme('spacing.7');
    margin-right: theme('spacing.1');
    font-size: theme('fontSize.xs');
    color: theme('textColor.neutral.DEFAULT');

    &:last-child {
      margin-right: 0;
    }
  }

  .react-datepicker__day:hover {
    border-radius: theme('spacing.1');
  }

  .react-datepicker__day {
    border: 1px solid rgba(0, 0, 0, 0);
    border-radius: 0;
    margin: 0;
    padding: theme('spacing.1');
    width: theme('spacing.8');
    font-size: theme('fontSize.xs');
    margin-bottom: theme('spacing.1');
    color: theme('textColor.neutral.DEFAULT');
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .react-datepicker__day--today {
    color: theme('textColor.brand.DEFAULT');
  }

  .react-datepicker__day:hover {
    border: 1px solid var(--neutral-6);
    background-color: transparent;
  }

  .react-datepicker__day--range-start,
  .react-datepicker__day--range-end {
    background-color: theme('colors.surface.neutralInvert.DEFAULT') !important;
    color: theme('textColor.neutralInvert.DEFAULT') !important;
  }

  .react-datepicker__day--range-start,
  .react-datepicker__day--range-start:hover {
    border-radius: theme('spacing.1') 0 0 theme('spacing.1');
  }

  .react-datepicker__day--range-end,
  .react-datepicker__day--range-end:hover {
    border-radius: 0 theme('spacing.1') theme('spacing.1') 0;
  }

  .react-datepicker__day--range-start.react-datepicker__day--range-end {
    border-radius: 0.25rem !important;
  }

  .react-datepicker__day--selected:not(.react-datepicker__day--range-start):not(.react-datepicker__day--range-end),
  .react-datepicker__day--in-range:not(.react-datepicker__day--range-start),
  .react-datepicker__day--in-selecting-range:not(
      .react-datepicker__day--in-range,
      .react-datepicker__month-text--in-range,
      .react-datepicker__quarter-text--in-range,
      .react-datepicker__year-text--in-range
    ) {
    background-color: theme('colors.surface.neutral.component');
    color: theme('textColor.neutral.DEFAULT');
  }

  // Ensure range start is always highlighted like hover
  .react-datepicker__day--selected.react-datepicker__day--range-start,
  .react-datepicker__day--selected:not(.react-datepicker__day--in-range) {
    background-color: theme('colors.surface.neutralInvert.DEFAULT') !important;
    color: theme('textColor.neutralInvert.DEFAULT') !important;
    border-radius: theme('spacing.1');
  }

  // Adjust border radius when it's part of a range
  .react-datepicker__day--selected.react-datepicker__day--range-start.react-datepicker__day--in-range {
    border-radius: theme('spacing.1') 0 0 theme('spacing.1');
  }

  .react-datepicker__day--range-end.react-datepicker__day--range-start {
    border-radius: theme('spacing.1');
  }

  // Apply same style than disabled days for those that are above the max-range
  .react-datepicker__day--disabled,
  .react-datepicker__day--max-range-exceeded.react-datepicker__day--in-selecting-range,
  .react-datepicker__day--max-range-exceeded.react-datepicker__day--in-selecting-range.react-datepicker__day--keyboard-selected {
    color: theme('textColor.neutral.disabled');
    border: 1px solid rgba(0, 0, 0, 0) !important;
  }

  // Tooltip for days that exceed max range limit
  .react-datepicker__day--max-range-exceeded {
    position: relative;
    cursor: not-allowed;

    &::before {
      content: 'Exceeds max range limit';
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-4px);
      background-color: theme('colors.neutral.700');
      color: theme('colors.white');
      padding: theme('spacing.2') theme('spacing.3');
      border-radius: theme('spacing.1');
      font-size: theme('fontSize.xs');
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-in-out;
      z-index: 1000;
    }

    &::after {
      content: '';
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-4px);
      border: 4px solid transparent;
      border-top-color: theme('colors.neutral.700');
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-in-out;
      z-index: 1000;
    }

    &:hover::before,
    &:hover::after {
      opacity: 1;
    }
  }
}

.date-picker--open {
  animation-duration: 0.6s;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  animation-fill-mode: forwards;
}
