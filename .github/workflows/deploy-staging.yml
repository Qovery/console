name: Deploy staging
on:
  push:
    branches:
      - staging
jobs:
  test-build-and-deploy:
    uses: ./.github/workflows/test-build-and-deploy.yml
    with:
      branch: staging
      configuration: staging
      application-commit-id: ${{ github.sha }}
    secrets:
      organization-id: ${{ secrets.QOVERY_ORGANIZATION_ID }}
      project-name: ${{ secrets.QOVERY_PROJECT_NAME }}
      environment-id: ${{ secrets.QOVERY_ENVIRONMENT_ID_STAGING }}
      application-ids: ${{ secrets.QOVERY_APPLICATION_IDS }}
      # environment-name: ${{ secrets.QOVERY_ENVIRONMENT_NAME_STAGING }}
      # application-names: ${{ secrets.QOVERY_APPLICATION_NAMES }}
      api-token: ${{ secrets.QOVERY_API_TOKEN }}
